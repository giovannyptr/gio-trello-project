## âš™ï¸ TECH STACK

- **Next.js** â€“ React framework with file-based routing & server components  
- **Supabase** â€“ Hosted Postgres, real-time subscriptions & Storage  
- **Clerk** â€“ Authentication & subscription billing integration  
- **@dnd-kit** â€“ Flexible drag-and-drop primitives  
- **TailwindCSS** â€“ Utility-first styling  
- **TypeScript** â€“ Static typing and developer tooling  

---

## âš¡ï¸ FEATURES

ðŸ“‹ **Boards & Columns**  
Create multiple boards and define custom columns.  

âž• **Dynamic Tasks**  
Add, edit and delete tasks with title, description, assignee, priority & due date.  

ðŸ”„ **Drag & Drop**  
Reorder tasks and move them between columns with smooth animations.  

ðŸ“¡ **Real-Time Updates**  
Changes sync instantly across clients via Supabase subscriptions.  

ðŸ” **Filtering**  
Filter tasks by priority, due date, and search within a board.  

ðŸ” **Auth & Billing**  
Sign up / log in with Clerk and upgrade your plan to create unlimited boards.  

ðŸš€ **One-Click Deployment**  
Deploy the app on Vercel with environment variables for Supabase & Clerk.  

---

## ðŸ‘Œ QUICK START

### Prerequisites
- Node.js (v16+)  
- Supabase CLI  
- Supabase project (URL & ANON key)  
- Clerk account (Publishable & Secret keys)  

---

## ðŸ§© SUPABASE SQL STATEMENTS

Creates helper function, tables (**boards**, **columns**, **tasks**)  
Adds **FKs**, **defaults**, and **useful indexes**  
Enables **RLS**  
Adds all policies described (plus the missing **boards** ones)  

---

```sql
-- =========================================================
-- 0. Helper: get the requesting user's id from JWT
-- =========================================================
CREATE OR REPLACE FUNCTION requesting_user_id()
RETURNS text AS $$
  SELECT NULLIF(
    current_setting('request.jwt.claims', true)::json->>'sub',
    ''
  )::text;
$$ LANGUAGE SQL STABLE;

-- =========================================================
-- 1. Tables
-- =========================================================

-- Boards
CREATE TABLE IF NOT EXISTS public.boards (
  id          bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at  timestamptz NOT NULL DEFAULT now(),
  updated_at  timestamptz NOT NULL DEFAULT now(),
  title       text NOT NULL,
  description text,
  color       text,
  user_id     text NOT NULL
);

-- Columns
CREATE TABLE IF NOT EXISTS public.columns (
  id          bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at  timestamptz NOT NULL DEFAULT now(),
  board_id    bigint NOT NULL REFERENCES public.boards(id) ON DELETE CASCADE,
  title       text NOT NULL,
  sort_order  int4 NOT NULL DEFAULT 0,
  user_id     text NOT NULL
);

-- Tasks
CREATE TABLE IF NOT EXISTS public.tasks (
  id          bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at  timestamptz NOT NULL DEFAULT now(),
  title       text NOT NULL,
  description text,
  assignee    text,
  due_date    date,
  priority    text,
  sort_order  int4 NOT NULL DEFAULT 0,
  column_id   bigint NOT NULL REFERENCES public.columns(id) ON DELETE CASCADE
);

-- Optional: keep boards.updated_at fresh
CREATE OR REPLACE FUNCTION public.set_updated_at()
RETURNS trigger AS $$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS trg_boards_updated_at ON public.boards;
CREATE TRIGGER trg_boards_updated_at
BEFORE UPDATE ON public.boards
FOR EACH ROW EXECUTE FUNCTION public.set_updated_at();

-- Helpful indexes
CREATE INDEX IF NOT EXISTS idx_columns_board_id ON public.columns(board_id);
CREATE INDEX IF NOT EXISTS idx_tasks_column_id  ON public.tasks(column_id);

-- =========================================================
-- 2. Enable Row Level Security
-- =========================================================
ALTER TABLE public.boards  ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.columns ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.tasks   ENABLE ROW LEVEL SECURITY;

-- =========================================================
-- 3. Policies
-- =========================================================

--------------------------
-- BOARDS TABLE POLICIES
--------------------------

-- View own boards
CREATE POLICY "Users can view their own boards"
ON public.boards
FOR SELECT
USING (user_id = requesting_user_id()::text);

-- Insert own boards
CREATE POLICY "Users can insert their own boards"
ON public.boards
FOR INSERT
WITH CHECK (requesting_user_id() = user_id);

-- Update own boards
CREATE POLICY "Users can update their own boards"
ON public.boards
FOR UPDATE
USING (user_id = requesting_user_id())
WITH CHECK (user_id = requesting_user_id());

-- Delete own boards
CREATE POLICY "Users can delete their own boards"
ON public.boards
FOR DELETE
USING (user_id = requesting_user_id());

--------------------------
-- COLUMNS TABLE POLICIES
--------------------------

-- Users can view columns from their own boards
CREATE POLICY "Users can view columns from their own boards" ON public.columns
FOR SELECT USING (
  EXISTS (
    SELECT 1 FROM public.boards
    WHERE boards.id = columns.board_id
      AND boards.user_id = requesting_user_id()
  )
);

-- Users can insert columns into their own boards
CREATE POLICY "Users can insert columns into their own boards" ON public.columns
FOR INSERT WITH CHECK (
  EXISTS (
    SELECT 1 FROM public.boards
    WHERE boards.id = columns.board_id
      AND boards.user_id = requesting_user_id()
  )
);

-- Users can update columns from their own boards
CREATE POLICY "Users can update columns from their own boards" ON public.columns
FOR UPDATE USING (
  EXISTS (
    SELECT 1 FROM public.boards
    WHERE boards.id = columns.board_id
      AND boards.user_id = requesting_user_id()
  )
)
WITH CHECK (
  EXISTS (
    SELECT 1 FROM public.boards
    WHERE boards.id = columns.board_id
      AND boards.user_id = requesting_user_id()
  )
);

-- Users can delete columns from their own boards
CREATE POLICY "Users can delete columns from their own boards" ON public.columns
FOR DELETE USING (
  EXISTS (
    SELECT 1 FROM public.boards
    WHERE boards.id = columns.board_id
      AND boards.user_id = requesting_user_id()
  )
);

-----------------------
-- TASKS TABLE POLICIES
-----------------------

-- Users can view tasks from their own boards
CREATE POLICY "Users can view tasks from their own boards" ON public.tasks
FOR SELECT USING (
  EXISTS (
    SELECT 1 FROM public.columns
    JOIN public.boards ON boards.id = columns.board_id
    WHERE columns.id = tasks.column_id
      AND boards.user_id = requesting_user_id()
  )
);

-- Users can insert tasks into their own boards
CREATE POLICY "Users can insert tasks into their own boards" ON public.tasks
FOR INSERT WITH CHECK (
  EXISTS (
    SELECT 1 FROM public.columns
    JOIN public.boards ON boards.id = columns.board_id
    WHERE columns.id = tasks.column_id
      AND boards.user_id = requesting_user_id()
  )
);

-- Users can update tasks from their own boards
CREATE POLICY "Users can update tasks from their own boards" ON public.tasks
FOR UPDATE USING (
  EXISTS (
    SELECT 1 FROM public.columns
    JOIN public.boards ON boards.id = columns.board_id
    WHERE columns.id = tasks.column_id
      AND boards.user_id = requesting_user_id()
  )
)
WITH CHECK (
  EXISTS (
    SELECT 1 FROM public.columns
    JOIN public.boards ON boards.id = columns.board_id
    WHERE columns.id = tasks.column_id
      AND boards.user_id = requesting_user_id()
  )
);

-- Users can delete tasks from their own boards
CREATE POLICY "Users can delete tasks from their own boards" ON public.tasks
FOR DELETE USING (
  EXISTS (
    SELECT 1 FROM public.columns
    JOIN public.boards ON boards.id = columns.board_id
    WHERE columns.id = tasks.column_id
      AND boards.user_id = requesting_user_id()
  )
);
```

## Clone and Run
```
git clone https://github.com/giovannyptr/gio-trello-project.git
cd trello-app-gio
npm install
```

Copy ```.env.example``` to ```.env.local``` and fill in your Supabase & Clerk credentials.

Start local Supabase emulation (optional):

```
supabase start
supabase db push
```

Run the development server:
```npm run dev```

Open ```http://localhost:3000 in your browser.```


flowchart TD
  %% Tech Stack
  subgraph Tech_Stack["âš™ï¸ Tech Stack"]
    N[Next.js]:::framework --> UI[Frontend UI & Routing]
    S[Supabase]:::db --> DB[Postgres DB + Policies + RLS]
    C[Clerk]:::auth --> AUTH[Auth & Billing]
    D[@dnd-kit]:::lib --> DRAG[Drag & Drop Interaction]
    T[TypeScript]:::lang --> DEV[Type Safety & Tooling]
    TW[TailwindCSS]:::style --> UI
  end

  %% Database Tables
  subgraph Database["ðŸ§© Supabase Schema"]
    Boards["ðŸ“‹ boards\n- id\n- title\n- description\n- color\n- user_id"] --> Columns["ðŸ§± columns\n- id\n- board_id (FK)\n- title\n- sort_order\n- user_id"]
    Columns --> Tasks["âœ… tasks\n- id\n- column_id (FK)\n- title\n- description\n- assignee\n- due_date\n- priority\n- sort_order"]
  end

  %% App Features
  subgraph Features["âš¡ï¸ Features"]
    F1["Create & Manage Boards"] --> F2["Add Columns per Board"]
    F2 --> F3["Add, Edit, Delete Tasks"]
    F3 --> F4["Drag & Drop Tasks between Columns"]
    F4 --> F5["Realtime Sync via Supabase Subscriptions"]
    F5 --> F6["Auth & Billing via Clerk"]
  end

  %% Relations
  UI --> F1
  F1 --> Boards
  F2 --> Columns
  F3 --> Tasks
  F4 --> DRAG
  F5 --> DB
  F6 --> AUTH

  classDef db fill:#fdf6e3,stroke:#b58900,stroke-width:1px,color:#333;
  classDef framework fill:#d3eafd,stroke:#007acc,stroke-width:1px,color:#000;
  classDef lib fill:#eaf5ea,stroke:#3a7a3a,stroke-width:1px,color:#000;
  classDef auth fill:#fbeaea,stroke:#c92c2c,stroke-width:1px,color:#000;
  classDef style fill:#faf3ff,stroke:#9c27b0,stroke-width:1px,color:#000;
  classDef lang fill:#fff3cd,stroke:#ff9800,stroke-width:1px,color:#000;


